(function(e,r){var n=0;e.nextTick=e.requestAnimationFrame||function(r,n){e.setTimeout(r,n||0)};e.uuid=function(e,r){var t=(+new Date).toString(36);if(r)return t.slice(-r);return(e||"")+t+"_"+ ++n};function t(e,r){return Object.prototype.toString.call(e)=="[object "+r+"]"}var i=e.util={uuid:uuid,build_query:function(e){if(t(e,"String"))return e;var r=[];for(var n in e){e[n]!==""&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}return r.join("&")},extend:function(){var e,r;function n(e,r){for(var n in r){e[n]=r[n]}}i.toArray(arguments).forEach(function(i){r=i;if(!t(i,"Object"))return;if(!e)e=i;else n(e,i)});return e||r},report:function(){console&&console.log&&console.log.apply(console,arguments)},reportErr:function(){console&&console.error&&console.error.apply(console,arguments)},nextTick:nextTick,toArray:function(e,r){return Array.prototype.slice.call(e,r||0)},isArray:function(e){return t(e,"Array")},detectType:function(e,r){return t(e,r)},throttle:function e(r,n){var t=null;n=n||10;return function(){var e=this,i=arguments;clearTimeout(t);t=setTimeout(function(){r.apply(e,i)},n)}},debounce:function e(r,n,t){var i,o;return function(){var e=this,u=arguments;var f=function(){i=null;if(!t)o=r.apply(e,u)};var a=t&&!i;clearTimeout(i);i=setTimeout(f,n);if(a)o=r.apply(e,u);return o}}};var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement;e.loadJS=function(e,r){r=r||{};var n=document.createElement("script");n.type="text/javascript";n.src=e;if(r.onErr)n.onerror=r.onErr;if(r.onLoad)n.onload=r.onLoad;o.appendChild(n);return n};e.loadCSS=function(e){var r=document.createElement("link");r.setAttribute("rel","stylesheet");r.setAttribute("href",e);o.appendChild(r)}})(this);(function(e,r){var n={},t="__event_once";function i(e){var r=util.toArray(arguments,1);if(!(e in n))return;var i=[];for(var o=0,u=n[e].length;o<u;o++){var f=n[e][o];if(!f)return;f.apply(null,r);if(f[t]){n[e][o]=null;i.push(o)}}for(var o=i.length-1;o>=0;o--)n[e].splice(i[o],1)}function o(e,r){var n=true;e.sort();u(e.join("|"),r,n);var t=[],o={};function f(r){t.push(r);if(arguments.length>2)o[r]=util.toArray(arguments,1);else o[r]=arguments[1];if(t.length>=e.length){t.sort();i(t.join("|"),o)}}for(var a=0;a<e.length;a++){u(e[a],f.bind(null,e[a]),n)}}function u(e,r,i){if(util.isArray(e))return o(e,r);if(!(e in n))n[e]=[];if(i)r[t]=true;n[e].push(r)}function f(e,r){if(!r){delete n[e];return}for(var t=n[e].length-1;t>=0;t--){if(n[e][t]===r){n[e].splice(t,1);break}}}function a(e){return n[e]}e.emitter={on:u,once:function(e,r){u(e,r,true)},emit:i,removeListener:f,listeners:a}})(this);(function(e,r){var n={},t={},i={},o={},u={},f={},a={serverHost:"/~",ENV:"PRODUCT"};function c(e,r,t){if(f[e])return f[e];if(util.detectType(e,"Function")){e=u[e]}if(e){e=l(e,r)}var i=e;if(t)i+="@"+t;if(!p(e,t)){if(!a.hardDefining){throw e+"@"+t+" lost"}else{n[i]={}}}return n[i]}function l(e,r){if(r){var n=e.split("/");if("."==n[0])n[0]=r.split("/")[0];var t=[];n.forEach(function(e){if(!e||"."==e)return;if(".."==e)t.pop();else t.push(e)});e=t.join("/")}return e}var s={DEFINING:1,ASYNCLOAD:2,DEFINED:3};var v="localStorage"in window?window.localStorage:null;function h(){a.hardDefining=true;Object.keys(t).forEach(function(e){d(e,[],t[e])});delete a.hardDefining;i={};t={}}function d(e,v,g,y){if(!g)return;var E=l(e);var j=E;var x=d.ns;if(x)j+="@"+x;if(j in f)return;if(!a.hardDefining){if(j in n)return;t[e]=g}else{if(i[e])return;i[e]=true}o[j]=s.DEFINING;y=y||{};var N=[];for(var A=0,T=v.length;A<T;A++){var D=v[A];if(util.detectType(D,"Function")){if(!u[D])u[D]=D();v[A]=u[D]}var C=l(v[A],E);if(!p(C,x))N.push(C)}if(N.length){if(!y.defered){nextTick(function(){y.defered=true;d(e,v,g,y)});return}if(y.throwIfDepMiss)return emitter.emit(j+":loadfail",{message:N.join(",")+" miss while loading "+E});var b=[];for(var A=N.length-1;A>=0;A--){var S=l(N[A]);if(x)S+="@"+x;b.push(S+":defined");if(o[S])N.splice(A,1);else o[S]=s.ASYNCLOAD}emitter.on(b,function(){if(a.hardDefining&&t[e])return;d(e,v,g)});if(N.length){m(N)}else{nextTick(h)}return}delete t[e];var w={},I={exports:r};var _=g(function(e){return c(e,E,x)},w,I);if(r===I.exports){n[j]=util.extend(n[j],w)||_}else{n[j]=util.extend(n[j],I.exports)}o[j]=s.DEFINED;emitter.emit(j+":defined");!y.fromLocal&&emitter.emit(e+":tocache",g,v)}function p(e,r){var t=l(e);if(r)t+="@"+r;return t in f||t in n}function m(r,n){n=n||{};if(!e.util.isArray(r))r=[r];var t=a.Version;if("auto"===t)t=+new Date;t=t?"?v="+t:"";hostNu=n.hostNu||0;var i=a.serverHost;if(util.isArray(i))i=i[hostNu];if(!i){throw"资源未配置";return}function o(){hostNu++;if(!util.isArray(a.serverHost)||hostNu>=a.serverHost.length)return console.error("资源拉取错误");m(r,{hostNu:hostNu})}if(a.ENV==="DEV"){r.forEach(function(e){if(!e||p(e))return;loadJS(i+e+".js"+t,{onErr:o})})}else{var u=a.combine?a.combine(r):r.join("+")+".js";if(!u)return;loadJS(i+u+t,{onErr:o})}}e.booter={require:c,define:d,isModLoaded:p,option:function(e,n){if(!e)return a;if(r!==n){a[e]=n}else{for(var t in e)a[t]=e[t]}if(a.localCache&&!v){a.localCache=false}return this},ref:function(e,r){f[e]=r;return this}};if(!e.define)e.define=e.booter.define;function g(r,n){var t=e.util;if(t.isArray(r)){r=r.map(function(e){return e+n})}else if(t.detectType(r,"String")){r+=n}return r}~function(){var r=[],n;e.booter.asyncLoad=function(t,i){var o;if(a.localCache&&a.modsNVersion){~function(){var e="_cjs_",r="_cjs_a_",n="_cjs_lt_";var t=14937408e5,i=4e3,u=2e3;function f(r){return e+m(r)}o=[];var c=x(n),l=false;c=c?c.split(","):[];var s=x(r),h=false;s=s?s.split(","):[];function p(e,r){var n=r.length;return{next:function(){var t=e.indexOf(r);if(t>-1){var i=e.slice(0,t);e=e.slice(t+n);return i}},return:function(){return e}}}function m(e){var r=c.indexOf(e);if(r===-1){l=true;r=c.push(e)-1;A()}return r}function g(e){return c[e]}function y(e){return e.map(g)}function E(e){return e.map(m)}function j(e,r){try{if(a.localCache.decompress)r=a.localCache.compress(r);v.setItem(e,r)}catch(e){console.log("update js list error ",error)}}function x(e){var r=v.getItem(e);if(a.localCache.decompress)r=a.localCache.decompress(r);return r}function N(){return(new Date-t)/1e3/60|0}var A=util.throttle(function(){if(!l)return;j(n,c.join(","))});var T=util.throttle(function(){if(!h)return;j(r,s.join(","))},500);function D(e,r){s[m(C)]=r;h=true;T()}for(var C in a.modsNVersion){var b=a.modsNVersion[C];var S=f(C);var w=x(S);if(w){var I=w.slice(0,32);if(I===b){w=p(w.slice(33),";");var _=w.next(),L=w.return();_=_?y(_.split(",")):[];try{d(C,_,new Function("return function (require ,exports ,module){"+L+"}")(),{fromLocal:true});D(C,N())}catch(e){console.log(e);localStorage.removeItem(S);booter.asyncLoad(C)}continue}}o.push(C);var O=0;emitter.on(C+":tocache",function(e,r){return function(n,t){if(!r||!e)return;window.setTimeout(function(){var i=n.toString();i=i.slice(i.indexOf("{")+1,-1).trim();var o=[r,E(t).join(","),i].join(";");j(e,o)},u+O++*10)}}(S,b))}function k(e){var r=N();s.forEach(function(n,t){n=n|0;if(n+e>=r)return;var i=g(t),o=f(i);localStorage.removeItem(o);D(i,0)})}if(a.localCache.expires&&s){setTimeout(function(){k(a.localCache.expires)},i)}}()}function u(){var e;if(f){e={};t.forEach(function(r){e[r]=c(r)})}else{e=c(t)}i.call(e)}var f=e.util.isArray(t);if(!f)t=[t];var l=[];t.forEach(function(e){if(!p(e))l.push(e)});if(0===l.length){return u()}else{t=l}if(i)emitter.on(g(t,":defined"),u);(o||t).forEach(function(e){if(r.indexOf(e)===-1)r.push(e)});if(!r.length)return;n&&e.clearTimeout(n);n=e.setTimeout(function(){m(r)},0);return this}}()})(this);